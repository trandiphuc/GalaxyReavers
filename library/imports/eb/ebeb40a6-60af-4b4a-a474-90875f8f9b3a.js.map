{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Actor/assets\\Script\\Actor\\Enemy.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","maxHitPoint","_hitPoint","explodeFx","SpriteFrame","onLoad","onCollisionEnter","other","self","node","group","getComponent","damage","destroy","die","tween","call","Sprite","spriteFrame","delay","instance","emit","start","update","dt"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,CADL;AAERC,mBAAW,CAFH;AAGRC,mBAAWP,GAAGQ;AAHN,KAHP;;AASL;;AAEAC,UAXK,oBAWI;AACL,aAAKH,SAAL,GAAiB,KAAKD,WAAtB;AACH,KAbI;AAeLK,oBAfK,4BAeYC,KAfZ,EAemBC,IAfnB,EAeyB;AAC1B,YAAID,MAAME,IAAN,CAAWC,KAAX,KAAqB,eAAzB,EAA0C;AACtC,iBAAKR,SAAL,IAAkBK,MAAME,IAAN,CAAWE,YAAX,CAAwB,QAAxB,EAAkCC,MAApD;AACH;AACD,YAAG,KAAKV,SAAL,IAAkB,CAArB,EAAwB;AACpBM,iBAAKK,OAAL;AACH;AACJ,KAtBI;AAwBLC,OAxBK,iBAwBC;AAAA;;AACF,YAAG,KAAKZ,SAAL,IAAkB,CAArB,EAAwB;AACpBN,eAAGmB,KAAH,CAAS,KAAKN,IAAd,EACKO,IADL,CACU,YAAM;AACR,sBAAKP,IAAL,CAAUE,YAAV,CAAuBf,GAAGqB,MAA1B,EAAkCC,WAAlC,GAAgD,MAAKf,SAArD;AACH,aAHL,EAIKgB,KAJL,CAIW,GAJX,EAKKH,IALL,CAKU,YAAM;AACRtB,wBAAQ0B,QAAR,CAAiBC,IAAjB,CAAsB,eAAtB;AACA,sBAAKZ,IAAL,CAAUI,OAAV;AACH,aARL,EASKS,KATL;AAUH;AACJ,KArCI;AAuCLC,UAvCK,kBAuCEC,EAvCF,EAuCM;AACP,aAAKV,GAAL;AACH;AAzCI,CAAT","file":"Enemy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Actor","sourcesContent":["const Emitter = require('Emitter');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        maxHitPoint: 0,\r\n        _hitPoint: 0,\r\n        explodeFx: cc.SpriteFrame,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this._hitPoint = this.maxHitPoint;\r\n    },\r\n\r\n    onCollisionEnter(other, self) {\r\n        if (other.node.group === 'player_bullet') {\r\n            this._hitPoint -= other.node.getComponent('Bullet').damage;\r\n        }\r\n        if(this._hitPoint <= 0) {\r\n            self.destroy();\r\n        }\r\n    },\r\n\r\n    die() {\r\n        if(this._hitPoint <= 0) {\r\n            cc.tween(this.node)\r\n                .call(() => {\r\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.explodeFx;\r\n                })\r\n                .delay(0.5)\r\n                .call(() => {\r\n                    Emitter.instance.emit('enemy_destroy');\r\n                    this.node.destroy();\r\n                })\r\n                .start();\r\n        }\r\n    },\r\n\r\n    update(dt) {\r\n        this.die();\r\n    },\r\n});\r\n"]}