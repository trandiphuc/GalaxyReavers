{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\ChooseLevel/assets\\Script\\ChooseLevel\\ChooseLevel.js"],"names":["mEmitter","require","cc","Class","extends","Component","properties","finishedLevel","homeButton","Button","player","Node","atlas","SpriteAtlas","level1Button","level2Button","level3Button","hintButton","hintText","offhintText","index","level","onLoad","parseInt","sys","localStorage","getItem","interactable","node","on","goToHome","bind","showHint","offHint","goToLevel1","goToLevel2","goToLevel3","tween","repeatForever","to","angle","start","setIndex","value","setIsBlock","isLockLv2","director","loadScene","instance","emit","getIndex","getScene","getChildByName","getComponent","runAction","spawn","moveTo","v2","scaleTo","sequence","x","rotateTo","y","goToGame","callFunc","getLevel","setLevelIndex","Sprite","spriteFrame","getSpriteFrame","position","delay"],"mappings":"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","file":"ChooseLevel.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\ChooseLevel","sourcesContent":["const mEmitter = require(\"./Emitter\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        finishedLevel: 0,\r\n        homeButton: cc.Button,\r\n        player: cc.Node,\r\n        atlas: cc.SpriteAtlas,\r\n        level1Button: cc.Button,\r\n        level2Button: cc.Button,\r\n        level3Button: cc.Button,\r\n        hintButton: cc.Button,\r\n        hintText: cc.Node,\r\n        offhintText: cc.Button,\r\n        index: 0,\r\n        level: 0,\r\n    },\r\n\r\n    onLoad() {\r\n        this.finishedLevel = parseInt(cc.sys.localStorage.getItem(\"finishLevel\") || 0);\r\n        switch (this.finishedLevel) {\r\n            case 1: this.level2Button.interactable = true;\r\n                break;\r\n            case 2:\r\n                this.level2Button.interactable = true;\r\n                this.level3Button.interactable = true;\r\n                break;\r\n            case 3:\r\n                this.level2Button.interactable = true;\r\n                this.level3Button.interactable = true;\r\n                break;\r\n        };\r\n        this.homeButton.node.on('click', this.goToHome.bind(this));\r\n        this.hintButton.node.on('click', this.showHint, this);\r\n        this.offhintText.node.on('click', this.offHint, this);\r\n        this.level1Button.node.on('click', this.goToLevel1, this);\r\n        this.level2Button.node.on('click', this.goToLevel2, this);\r\n        this.level3Button.node.on('click', this.goToLevel3, this);\r\n        cc.tween(this.hintButton.node)\r\n            .repeatForever(\r\n                cc.tween(this.hintButton.node)\r\n                    .to(0.2, { angle: -20 })\r\n                    .to(0.2, { angle: 20 })\r\n            )\r\n            .start()\r\n    },\r\n\r\n    setIndex(value) {\r\n        this.index = value;\r\n    },\r\n\r\n    setIsBlock(value) {\r\n        this.isLockLv2 = value;\r\n    },\r\n\r\n    goToHome() {\r\n        cc.director.loadScene('Menu', (() => {\r\n            mEmitter.instance.emit('changeScreen', 'home');\r\n            let getIndex = cc.director.getScene().getChildByName('Canvas').getChildByName('HomeNode').getComponent('Home');\r\n            getIndex.setIndex(this.index);\r\n        }));\r\n    },\r\n\r\n    showHint() {\r\n        this.hintText.runAction(cc.spawn(\r\n            cc.moveTo(1, cc.v2(0, 0)),\r\n            cc.scaleTo(1, 1)\r\n        ));\r\n    },\r\n\r\n    offHint() {\r\n        this.hintText.runAction(cc.scaleTo(0.2, 1, 0));\r\n    },\r\n\r\n    goToLevel1() {\r\n        this.level = 1;\r\n        this.level1Button.interactable = false;\r\n        this.player.runAction(cc.sequence(\r\n            cc.moveTo(1, cc.v2(this.player.x, 1000)),\r\n            cc.moveTo(0.2, cc.v2(this.level1Button.node.x, 1000)),\r\n            cc.rotateTo(0.5, 180),\r\n            cc.spawn(\r\n                cc.scaleTo(1, 0.8),\r\n                cc.moveTo(1, cc.v2(this.level1Button.node.x, this.level1Button.node.y))\r\n            ),\r\n            cc.rotateTo(1, 0)\r\n        ));\r\n        this.goToGame();\r\n    },\r\n\r\n    goToLevel2() {\r\n        this.level = 2;\r\n        this.player.runAction(cc.sequence(\r\n            cc.moveTo(1, cc.v2(this.player.x, 1000)),\r\n            cc.moveTo(0.1, cc.v2(this.level2Button.node.x, 1000)),\r\n            cc.rotateTo(0.1, 180),\r\n            cc.spawn(\r\n                cc.scaleTo(1, 0.4),\r\n                cc.moveTo(1, cc.v2(this.level2Button.node.x, this.level2Button.node.y))\r\n            ),\r\n            cc.rotateTo(1, 0),\r\n            cc.callFunc(()=>{\r\n                this.goToGame();\r\n            })\r\n        ));\r\n    },\r\n\r\n    goToLevel3() {\r\n        this.level = 3;\r\n        this.player.runAction(cc.sequence(\r\n            cc.moveTo(1, cc.v2(this.player.x, 1000)),\r\n            cc.moveTo(0.1, cc.v2(this.level3Button.node.x, 1000)),\r\n            cc.rotateTo(0.1, 180),\r\n            cc.spawn(\r\n                cc.scaleTo(1, 0.2),\r\n                cc.moveTo(1, cc.v2(this.level3Button.node.x, this.level3Button.node.y))\r\n            ),\r\n            cc.rotateTo(1, 0),\r\n            cc.callFunc(()=>{\r\n                this.goToGame();\r\n            })\r\n        ));\r\n    },\r\n    goToGame() {\r\n        cc.director.loadScene('PlayGame', (() => {\r\n            let getLevel = cc.director.getScene().getChildByName('Canvas').getChildByName('Game').getChildByName('WaveManager').getComponent('WaveMng');\r\n            getLevel.setLevelIndex(this.level);\r\n            let getIndex = cc.director.getScene().getChildByName('Canvas').getChildByName('Game').getComponent('Game');\r\n            getIndex.setIndex(this.index);\r\n        }))\r\n    },\r\n    start() {\r\n        this.player.getComponent(cc.Sprite).spriteFrame = this.atlas.getSpriteFrame('space' + this.index);\r\n        this.player.y = 1000;\r\n        cc.tween(this.player)\r\n            .to(0.1, { angle: 180 })\r\n            .to(2, { position: cc.v2(this.level1Button.node.x, this.level1Button.node.y) })\r\n            .to(1.5, { angle: 360 })\r\n            .delay(1)\r\n            .start();\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}