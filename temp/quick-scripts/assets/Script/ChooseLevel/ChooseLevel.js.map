{"version":3,"sources":["ChooseLevel.js"],"names":["mEmitter","require","cc","Class","extends","Component","properties","homeButton","Button","player","Node","atlas","SpriteAtlas","level1Button","level2Button","level3Button","hintButton","hintText","offhintText","index","level","isLockLv2","isLockLv3","onLoad","node","on","goToHome","bind","showHint","offHint","goToLevel1","goToLevel2","goToLevel3","tween","repeatForever","to","angle","start","setIndex","value","setIsBlock","director","loadScene","instance","emit","getIndex","getScene","getChildByName","getComponent","runAction","spawn","moveTo","v2","scaleTo","interactable","sequence","x","rotateTo","y","setLevelIndex","Sprite","spriteFrame","getSpriteFrame","position","delay","call"],"mappings":"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","file":"ChooseLevel.js","sourceRoot":"../../../../../assets/Script/ChooseLevel","sourcesContent":["const mEmitter = require(\"./Emitter\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        homeButton: cc.Button,\n        player: cc.Node,\n        atlas: cc.SpriteAtlas,\n        level1Button: cc.Button,\n        level2Button: cc.Button,\n        level3Button: cc.Button,\n        hintButton: cc.Button,\n        hintText: cc.Node,\n        offhintText: cc.Button,\n        index: 0,\n        level: 0,\n        isLockLv2: true,\n        isLockLv3: true,\n    },\n\n    onLoad() {\n        this.homeButton.node.on('click', this.goToHome.bind(this));\n        this.hintButton.node.on('click', this.showHint, this);\n        this.offhintText.node.on('click', this.offHint, this);\n        this.level1Button.node.on('click', this.goToLevel1, this);\n        this.level2Button.node.on('click', this.goToLevel2, this);\n        this.level3Button.node.on('click', this.goToLevel3, this);\n        cc.tween(this.hintButton.node)\n            .repeatForever(\n                cc.tween(this.hintButton.node)\n                    .to(0.2, { angle: -20 })\n                    .to(0.2, { angle: 20 })\n            )   \n            .start()\n    },\n\n    setIndex(value) {\n        this.index = value;\n    },\n\n    setIsBlock(value){\n        this.isLockLv2 = value;\n    },\n\n    goToHome() {\n        cc.director.loadScene('Menu', (() => {\n            mEmitter.instance.emit('changeScreen', 'home');\n            let getIndex = cc.director.getScene().getChildByName('Canvas').getChildByName('HomeNode').getComponent('Home');\n            getIndex.setIndex(this.index);\n        }));\n    },\n\n    showHint(){\n        this.hintText.runAction(cc.spawn(\n            cc.moveTo(1, cc.v2(0, 0)),\n            cc.scaleTo(1, 1)\n        ));\n    },\n\n    offHint(){\n        this.hintText.runAction(cc.scaleTo(0.2, 1, 0));\n    },\n\n    goToLevel1() {\n        this.level = 1;\n        this.level1Button.interactable = false;\n        this.player.runAction(cc.sequence(\n            cc.moveTo(1, cc.v2(this.player.x, 1000)),\n            cc.moveTo(0.2, cc.v2(this.level1Button.node.x, 1000)),\n            cc.rotateTo(0.5, 180),\n            cc.spawn(\n                cc.scaleTo(1, 0.8),\n                cc.moveTo(1, cc.v2(this.level1Button.node.x, this.level1Button.node.y))\n            ),\n            cc.rotateTo(1, 0)\n        ));\n        \n        cc.director.loadScene('PlayGame', (()=>{\n            let getIndex = cc.director.getScene().getChildByName('Canvas').getChildByName('Game').getChildByName('WaveManager').getComponent('WaveMng');\n            getIndex.setLevelIndex(this.level);\n        }))\n    },\n\n    goToLevel2() {\n        this.level = 2;\n        this.level2Button.interactable = false;\n        this.player.runAction(cc.sequence(\n            cc.rotateTo(0.5, 335),\n            cc.spawn(\n                cc.scaleTo(1, 0.4),\n                cc.moveTo(1, cc.v2(this.level2Button.node.x, this.level2Button.node.y))\n            ),\n            cc.rotateTo(1, 0)\n        ));\n        cc.director.loadScene('PlayGame', (()=>{\n            let getIndex = cc.director.getScene().getChildByName('Canvas').getChildByName('Game').getChildByName('WaveManager').getComponent('WaveMng');\n            getIndex.setLevelIndex(this.level);\n        }))\n    },\n\n    goToLevel3() {\n        this.level = 3;\n        this.level3Button.interactable = false;\n        this.player.runAction(cc.sequence(\n            cc.rotateTo(0.5, 100),\n            cc.spawn(\n                cc.scaleTo(1, 0.2),\n                cc.moveTo(1, cc.v2(this.level3Button.node.x, this.level3Button.node.y))\n            ),\n            cc.rotateTo(1, 0)\n        ));\n    },\n\n    start() {\n        if(this.isLockLv2 === false){\n            this.level2Button.interactable = true;\n        }\n        if(this.isLockLv3 === false){\n            this.level3Button.interactable = true;\n        }\n        this.player.getComponent(cc.Sprite).spriteFrame = this.atlas.getSpriteFrame('space' + this.index);\n        this.player.y = 1000;\n        cc.tween(this.player)\n            .to(0.1, { angle: 180 })\n            .to(2, { position: cc.v2(this.level1Button.node.x, this.level1Button.node.y) })\n            .to(1.5, { angle: 360 })\n            .delay(1)\n            .call(() => {\n                this.level1Button.interactable = true;\n            })\n            .start();\n    },\n\n    // update (dt) {},\n});\n"]}